<!DOCTYPE>
<html>

<head>
    <title>首页 {$site_info.site_name|default=''}</title>
    <meta name="keywords" content="{$site_info.site_seo_keywords|default=''}" />
    <meta name="description" content="{$site_info.site_seo_description|default=''}">
    {include file='public/header' /}
    <link href="/template/web/{$templateName}/public/static/css/login.css" rel="stylesheet">
</head>

<body class="body-white">
    {include file='public/nav' /}
    <div class="container container-body">
        <div class="row mt-4">
            <div class="col-lg-6 col-md-6 col-auto mt-4 login">
                <div class="login-img">
                    <img src="/template/web/{$templateName}/public/static/img/loginLeft.jpg">
                </div>
            </div>
            <div class="col-lg-6 col-md-6 col-auto mt-4 login">
                <div class="login media bg-white">
                    <div class="align-self-center mx-auto">
                        <div class="text-with-hr mt-4">
                            <span style="font-weight: 600;">欢迎登录</span>
                        </div>
                        <form>
                            <div id="nickname-login">
                                <div class="form-group">
                                    <label><strong class="text-black-50">手机号/用户名</strong></label>
                                    <input type="text" class="form-control">
                                    <!-- <small id="emailHelp" class="form-text text-muted">We'll neasdsadasdsaaaaaaaaaaaaaaav.</small> -->
                                </div>
                                <div class="form-group">
                                    <label><strong class="text-black-50">请输入密码</strong></label>
                                    <input type="password" class="form-control">
                                </div>
                            </div>
                            <div id="sms-login" style="display: none;">
                                <div class="form-group mb-3">
                                    <label><strong class="text-black-50">请输入手机号码</strong></label>
                                    <input type="text" class="form-control mobile">
                                    <!-- <small id="emailHelp" class="form-text text-muted">We'll neasdsadasdsaaaaaaaaaaaaaaav.</small> -->
                                </div>
                                <strong class="text-black-50 ">请输入验证码</strong>
                                <div class="input-group mt-2 mb-3">
                                    <input type="text" class="form-control" aria-describedby="basic-addon">
                                    <div class="input-group-append">
                                        <span class="input-group-text" id="basic-addon">
                                            <a href="javascript:;">获取验证码</a>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group form-check  mt-3">
                                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                <label class="form-check-label text-black-50">记住我</label>
                                <label class="float-right text-primary sms-login">
                                    <i class="fas fa-mobile-alt text-primary" aria-hidden="true"></i>
                                    短信验证登录
                                </label>
                                <label class="float-right text-primary nickname-login" style="display: none;">
                                    <i class="fas fa-user text-primary" aria-hidden="true"></i>
                                    用户名/手机号登录
                                </label>
                            </div>
                            <button type="submit" class="btn btn-primary btn-block">登录</button>
                        </form>
                        <div class="clearfix"></div>
                        <div class="forget-password mt-2">
                            <p>
                                <label class="form-check-label text-black-50">
                                    <a href="{:url('/login/register')}">
                                        账号注册
                                    </a>
                                </label>
                                <label class="float-right text-black-50" for="exampleCheck1">
                                    <a href="{:url('/login/forget')}">
                                        忘记密码
                                    </a>
                                </label>
                            </p>
                        </div>
                        <div class="clearfix"></div>
                        <div class="text-with-hr">
                            <span class="text-black-50">其他方式登录</span>
                        </div>
                        <div class="other-login">
                            <div class="d-flex mb-3">
                                <img class="other-login-img flex-fill" src="/template/web/{$templateName}/public/static/img/wechatLogin.svg" />
                                <img class="other-login-img flex-fill" src="/template/web/{$templateName}/public/static//img/weiboLogin.svg" />
                                <!-- <img class="other-login-img flex-fill" src="/static/web/detault/img/qqLogin.svg" /> -->
                            </div>
                        </div>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <br>
    {include file='public/footer' /}
</body>
<script type="text/javascript">
$(".sms-login").click(function() {
    $("#nickname-login").hide();
    $("#sms-login").show();
    $(".sms-login").hide();
    $(".nickname-login").show();
});

$(".nickname-login").click(function() {
    $("#nickname-login").show();
    $("#sms-login").hide();
    $(".sms-login").show();
    $(".nickname-login").hide();
});




$("#basic-addon").click(function() {
    var mobile;
    mobile = $(".mobile").val();


    //验证手机号
    switch (CheckMobile(mobile)) {
        case 0:
            return error('手机号不能为空')
            break;
        case 2:
            return error('请输入正确的手机号')
            break;
        default:
    }



    success('验证码获取成功');
    //请求短信接口
    $.post("/user/verification_code/sends.html", {}, function(data) {
        if (data.code == 1) {

            //展示文案
            return success('验证码获取成功');
            //todo
        }
    });

    //更改点击状态
    $("#basic-addon").addClass('sms-second');

    //验证码定时器
    timesRun = 30;
    $("#basic-addon").find("a").text("剩余" + timesRun + 's');
    var interval = setInterval(function() {
        timesRun -= 1;
        $("#basic-addon").find("a").text("剩余" + timesRun + 's');
        if (timesRun === 0) {
            $("#basic-addon").find("a").text('重新获取');
            $("#basic-addon").removeClass('sms-second');
            clearInterval(interval);
        }
    }, 1000);



});
</script>